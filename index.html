<!DOCTYPE html>
<html>
<head>
    <title>Pi Visualization</title>
    <style>
        .pi {  
            background-color: black;
        }
        .input {
            font-weight: 300;
            color: white;
        }
    </style>
</head>
<body background-color="black" class="pi">
    <canvas id="pendulumCanvas" width="800" height="600" background-color="black"></canvas>
    
    <!-- Input fields to control pendulum properties -->
    <div class="input">
        <label for="bobRadius">Bob Radius:</label>
        <input type="number" id="bobRadius" value="100">
    </div>
    <div class="input">
        <label for="bobSpeed">Bob Speed:</label>
        <input type="number" id="bobSpeed" value="0.999">
    </div>
    <div class="input">
        <label for="bob2Radius">Bob2 Radius:</label>
        <input type="number" id="bob2Radius" value="100">
    </div>
    <div class="input">
        <label for="bob2Speed">Bob2 Speed:</label>
        <input type="number" id="bob2Speed" value="0.999">
    </div>
    <div class="input">
        <label for="time">Time:</label>
        <input type="number" id="time" value="0">
    </div>
    <div class="input">
        <label for="bob2Angle">Bob2 Angle:</label>
        <input type="number" id="bob2Angle" value="0.422">
    </div>
    <script>
        const canvas = document.getElementById('pendulumCanvas');
        const ctx = canvas.getContext('2d');

        const PI = Math.PI;

        class Pendulum {
            constructor(canvas) {
                this.canvas = canvas;
                this.ctx = canvas.getContext('2d');
                this.piv = { x: canvas.width / 2, y: canvas.height / 2 };
                this.bob = { x: this.piv.x, y: this.piv.y + 100 };
                this.bob2 = { x: this.bob.x, y: this.bob.y + 100 };
                this.bobRadius = 100;
                this.bob2Radius = 100;
                this.bobSpeed = 0.999;
                this.bob2Speed = 0.099;
                this.time = 0;
                this.bob2Angle = 0;
                this.path = [];
            }

            updatePendulumProperties() {
                this.bobRadius = parseFloat(document.getElementById('bobRadius').value);
                this.bob2Radius = parseFloat(document.getElementById('bob2Radius').value);
                this.bob = { x: this.piv.x, y: this.piv.y + bobRadius };
                this.bob2 = { x: this.bob.x, y: this.bob.y + bob2Radius };
                this.bobSpeed = parseFloat(document.getElementById('bobSpeed').value);
                this.bob2Speed = parseFloat(document.getElementById('bob2Speed').value);
                this.time = parseFloat(document.getElementById('time').value);
                this.bob2Angle = parseFloat(document.getElementById('bob2Angle').value);
            }

            update() {
                //console.log( this.bobRadius , this.bob2Radius)

                this.bob.x = this.piv.x + this.bobRadius * Math.cos(this.bobSpeed * this.time);
                this.bob.y = this.piv.y + this.bobRadius * Math.sin(this.bobSpeed * this.time);

                this.bob2.x = this.bob.x + this.bob2Radius * Math.cos(this.bob2Angle);
                this.bob2.y = this.bob.y + this.bob2Radius * Math.sin(this.bob2Angle);
                this.bob2Angle += this.bob2Speed;

                this.time += 0.02;

                this.path.push({ x: this.bob2.x, y: this.bob2.y });
            }

            render() {
                const centerX = this.canvas.width / 2;
                const centerY = this.canvas.height / 2;

                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

                this.ctx.beginPath();
                this.ctx.moveTo(this.piv.x, this.piv.y);
                this.ctx.lineTo(this.bob.x, this.bob.y);
                this.ctx.strokeStyle = 'white';
                this.ctx.stroke();

                this.ctx.beginPath();
                this.ctx.moveTo(this.bob.x, this.bob.y);
                this.ctx.lineTo(this.bob2.x, this.bob2.y);
                this.ctx.strokeStyle = 'white';
                this.ctx.stroke();

                this.ctx.beginPath();
                this.ctx.arc(this.piv.x, this.piv.y, 10, 0, 2 * PI);
                this.ctx.fillStyle = 'white';
                this.ctx.fill();


                this.ctx.beginPath();
                this.ctx.moveTo(this.path[0].x, this.path[0].y);
                this.ctx.strokeStyle = 'white';
                for (let i = 1; i < this.path.length; i++) {
                    this.ctx.lineTo(this.path[i].x, this.path[i].y);
                }
                this.ctx.stroke();
            }
        }

        function animate() {
            const pendulum = new Pendulum(canvas);

            // Add an event listener to detect changes in input fields
            const inputFields = document.querySelectorAll('.input input');

            function draw() {
                pendulum.update();
                pendulum.render();
                requestAnimationFrame(draw);
            }

            inputFields.forEach(input => {
                input.addEventListener('change', () => {
                    pendulum.path.length = 0;
                    pendulum.bobRadius . pendulum.bob2Radius = 0;
                    pendulum.bob.x, pendulum.bob.y = 0;
                    pendulum.bob2.x , pendulum.bob2.y = 0;
                    pendulum.updatePendulumProperties();
                });
            });

            draw();
        }

        animate();
    </script>
</body>
</html>
